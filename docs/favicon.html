<!DOCTYPE html><html><head><title>Connect - High quality middleware for node.js</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link rel="stylesheet" href="style.css"><script src="jquery.js"></script><script src="docs.js"></script></head><body><div id="content"><h1>Connect</h1><p>High quality middleware for node.js</p><div id="module.exports" class="comment"><h2></h2><div class="description"><h2>Favicon</h2>

<p>By default serves the connect favicon, or the favicon<br />located by the given <code>path</code>.</p>

<h2>Options</h2>

<ul>
<li><code>maxAge</code>  cache-control max-age directive, defaulting to 1 day</li>
</ul>

<h2>Examples</h2>

<h2>Serve default favicon</h2>

<pre><code>connect()
  .use(connect.favicon())
</code></pre>

<h2>Serve favicon before logging for brevity</h2>

<pre><code>connect()
  .use(connect.favicon())
  .use(connect.logger('dev'))
</code></pre>

<h2>Serve custom favicon</h2>

<pre><code>connect()
  .use(connect.favicon('public/favicon.ico))
</code></pre></div><ul class="tags"><li><em>String</em> path </li><li><em>Object</em> options </li><li>returns <em>Function</em> </li></ul><h3>Source</h3><pre><code>module.exports = function favicon(path, options){
  var options = options || {}
    , path = path || __dirname + '/../public/favicon.ico'
    , maxAge = options.maxAge || 86400000;

  return function favicon(req, res, next){
    if ('/favicon.ico' == req.url) {
      if (icon) {
        res.writeHead(200, icon.headers);
        res.end(icon.body);
      } else {
        fs.readFile(path, function(err, buf){
          if (err) return next(err);
          icon = {
            headers: {
                'Content-Type': 'image/x-icon'
              , 'Content-Length': buf.length
              , 'ETag': '"' + utils.md5(buf) + '"'
              , 'Cache-Control': 'public, max-age=' + (maxAge / 1000)
            },
            body: buf
          };
          res.writeHead(200, icon.headers);
          res.end(icon.body);
        });
      }
    } else {
      next();
    }
  };
};</code></pre></div></div><ul id="menu"><li><a href="#module.exports"></a></li></ul></body></html>