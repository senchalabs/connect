<html>
  <head>
    <title>
      
        Connect - bodyParser
      
    </title>
    <link rel='stylesheet' href='main.css' />
  </head>
  <body>
    <div id="content">
      
        <h1>bodyParser</h1>
        <span class="filename">lib/middleware/bodyParser.js</span>
      

      
      
        
        
        
        
        
          <div class="comment">
            
            <p class="description"><p>Parse request bodies.</p></p>

            
              <div class="body">
                <p>By default <em>application/json</em> and <em>application/x-www-form-urlencoded</em>
are supported, however you may map <code>connect.bodyParser.parse[contentType]</code>
to a function of your choice to replace existing parsers, or implement
one for other content-types.</p>

<h2>Examples</h2>

<pre><code> <span class="variable">connect</span>.<span class="variable">createServer</span>(
     <span class="variable">connect</span>.<span class="variable">bodyParser</span>()
   , <span class="keyword">function</span>(<span class="variable">req</span>, <span class="variable">res</span>) {
     <span class="variable">res</span>.<span class="variable">end</span>("<span class="variable">viewing</span> <span class="variable">user</span> " + <span class="variable">req</span>.<span class="variable">body</span>.<span class="variable">user</span>.<span class="variable">name</span>);
   }
 );</code></pre>

<p>Since both <em>json</em> and <em>x-www-form-urlencoded</em> are supported by
default, either of the following requests would result in the response
of &quot;viewing user tj&quot;.</p>

<pre><code> $ <span class="variable">curl</span> -<span class="variable">d</span> "<span class="variable">user</span>[<span class="variable">name</span>]=<span class="variable">tj</span>" <span class="variable">http</span>:<span class="comment">//localhost/</span>
 $ <span class="variable">curl</span> -<span class="variable">d</span> "{&<span class="variable">quot</span>;<span class="variable">user</span>&<span class="variable">quot</span>;:{&<span class="variable">quot</span>;<span class="variable">name</span>&<span class="variable">quot</span>;:&<span class="variable">quot</span>;<span class="variable">tj</span>&<span class="variable">quot</span>;}}" -<span class="class">H</span> &<span class="variable">quot</span>;<span class="class">Content</span>-<span class="class">Type</span>: <span class="regexp">/json&quot; http:/</span><span class="regexp">/localhost/</span></code></pre>
              </div>
            

            
              <ul class="tags">
              
                
                  <li class="return"><em>returns</em> <span class="types">Function</span></li>
                

                

                

                
              
                

                
                  <li class="api"><em>api</em> <span class="visibility">public</span></li>
                

                

                
              
              </ul>

<!--            
              <pre class="code">
                <code>
<span class="variable">exports</span> = <span class="variable">module</span>.<span class="variable">exports</span> = <span class="keyword">function</span> <span class="variable">bodyParser</span>(){
  <span class="keyword">return</span> <span class="keyword">function</span> <span class="variable">bodyParser</span>(<span class="variable">req</span>, <span class="variable">res</span>, <span class="variable">next</span>) {
    <span class="keyword">if</span> (<span class="string">'GET'</span> == <span class="variable">req</span>.<span class="variable">method</span> || <span class="string">'HEAD'</span> == <span class="variable">req</span>.<span class="variable">method</span>) <span class="keyword">return</span> <span class="variable">next</span>();
    <span class="keyword">var</span> <span class="variable">parser</span> = <span class="variable">exports</span>.<span class="variable">parse</span>[<span class="variable">mime</span>(<span class="variable">req</span>)];
    <span class="keyword">if</span> (<span class="variable">parser</span> && !<span class="variable">req</span>.<span class="variable">body</span>) {
      <span class="keyword">var</span> <span class="variable">data</span> = <span class="string">''</span>;
      <span class="variable">req</span>.<span class="variable">setEncoding</span>(<span class="string">'utf8'</span>);
      <span class="variable">req</span>.<span class="variable">on</span>(<span class="string">'data'</span>, <span class="keyword">function</span>(<span class="variable">chunk</span>) { <span class="variable">data</span> += <span class="variable">chunk</span>; });
      <span class="variable">req</span>.<span class="variable">on</span>(<span class="string">'end'</span>, <span class="keyword">function</span>(){
        <span class="variable">req</span>.<span class="variable">rawBody</span> = <span class="variable">data</span>;
        <span class="keyword">try</span> {
          <span class="variable">req</span>.<span class="variable">body</span> = <span class="variable">data</span>
            ? <span class="variable">parser</span>(<span class="variable">data</span>)
            : {};
        } <span class="keyword">catch</span> (<span class="variable">err</span>) {
          <span class="keyword">return</span> <span class="variable">next</span>(<span class="variable">err</span>);
        }
        <span class="variable">next</span>();
      });
    } <span class="keyword">else</span> {
      <span class="variable">next</span>();
    }
  }
};
                </code>
              </pre>
             -->
          
          </div>
        
      
        
      
    </div>
  </body>
</html>